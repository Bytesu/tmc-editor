!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b,c=Object(this),d=c.length>>>0,e=0;if(2===arguments.length)b=arguments[1];else{for(;d>e&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(a){for(var b=Object(this),c=b.length>>>0,d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d});var isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(a){var b="Comic Sans MS"===a?"Courier New":"Comic Sans MS",c=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),d=c.css("fontFamily",b).width(),e=c.css("fontFamily",a+","+b).width();return c.remove(),d!==e},agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:isSupportAmd?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},func=function(){var a=function(a){return function(b){return a===b}},b=function(a,b){return a===b},c=function(a){return function(b,c){return b[a]===c[a]}},d=function(){return!0},e=function(){return!1},f=function(a){return function(){return!a.apply(a,arguments)}},g=function(a,b){return function(c){return a(c)&&b(c)}},h=function(a){return a},i=0,j=function(a){var b=++i+"";return a?a+b:b},k=function(a){var b=$(document);return{top:a.top+b.scrollTop(),left:a.left+b.scrollLeft(),width:a.right-a.left,height:a.bottom-a.top}},l=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b},m=function(a,b){return b=b||"",b+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")};return{eq:a,eq2:b,peq2:c,ok:d,fail:e,self:h,not:f,and:g,uniqueId:j,rect2bnd:k,invertObject:l,namespaceToCamel:m}}(),list=function(){var a=function(a){return a[0]},b=function(a){return a[a.length-1]},c=function(a){return a.slice(0,a.length-1)},d=function(a){return a.slice(1)},e=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(b(e))return e}},f=function(a,b){for(var c=0,d=a.length;d>c;c++)if(!b(a[c]))return!1;return!0},g=function(a,b){return-1!==$.inArray(b,a)},h=function(a,b){return b=b||func.self,a.reduce(function(a,c){return a+b(c)},0)},i=function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},j=function(c,e){if(!c.length)return[];var f=d(c);return f.reduce(function(a,c){var d=b(a);return e(b(d),c)?d[d.length]=c:a[a.length]=[c],a},[[a(c)]])},k=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]&&b.push(a[c]);return b},l=function(a){for(var b=[],c=0,d=a.length;d>c;c++)g(b,a[c])||b.push(a[c]);return b},m=function(a,b){var c=a.indexOf(b);return-1===c?null:a[c+1]},n=function(a,b){var c=a.indexOf(b);return-1===c?null:a[c-1]};return{head:a,last:b,initial:c,tail:d,prev:n,next:m,find:e,contains:g,all:f,sum:h,from:i,clusterBy:j,compact:k,unique:l}}(),NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff",dom=function(){var a=function(a){return a&&$(a).hasClass("note-editable")},b=function(a){return a&&$(a).hasClass("note-control-sizing")},c=function(a){var b;if(a.hasClass("note-air-editor")){var c=list.last(a.attr("id").split("-"));return b=function(a){return function(){return $(a+c)}},{editor:function(){return a},holder:function(){return a.data("holder")},editable:function(){return a},popover:b("#note-popover-"),handle:b("#note-handle-"),dialog:b("#note-dialog-")}}return b=function(b){return function(){return a.find(b)}},{editor:function(){return a},holder:function(){return a.data("holder")},dropzone:b(".note-dropzone"),toolbar:b(".note-toolbar"),editable:b(".note-editable"),codable:b(".note-codable"),statusbar:b(".note-statusbar"),popover:b(".note-popover"),handle:b(".note-handle"),dialog:b(".note-dialog")}},d=function(a){var b=$(a).closest(".note-editor, .note-air-editor, .note-air-layout");if(!b.length)return null;var d;return d=b.is(".note-editor, .note-air-editor")?b:$("#note-editor-"+list.last(b.attr("id").split("-"))),c(d)},e=function(a){return a=a.toUpperCase(),function(b){return b&&b.nodeName.toUpperCase()===a}},f=function(a){return a&&3===a.nodeType},g=function(a){return a&&/^BR|^IMG|^HR/.test(a.nodeName.toUpperCase())},h=function(b){return a(b)?!1:b&&/^DIV|^P|^LI|^H[1-7]/.test(b.nodeName.toUpperCase())},i=e("LI"),j=function(a){return h(a)&&!i(a)},k=e("TABLE"),l=function(a){return!(p(a)||m(a)||h(a)||k(a)||o(a))},m=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},n=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},o=e("BLOCKQUOTE"),p=function(b){return n(b)||o(b)||a(b)},q=e("A"),r=function(a){return l(a)&&!!A(a,h)},s=function(a){return l(a)&&!A(a,h)},t=e("BODY"),u=function(a,b){return a.nextSibling===b||a.previousSibling===b},v=function(a,b){b=b||func.ok;var c=[];return a.previousSibling&&b(a.previousSibling)&&c.push(a.previousSibling),c.push(a),a.nextSibling&&b(a.nextSibling)&&c.push(a.nextSibling),c},w=agent.isMSIE?"&nbsp;":"<br>",x=function(a){return f(a)?a.nodeValue.length:a.childNodes.length},y=function(a){var b=x(a);return 0===b?!0:dom.isText(a)||1!==b||a.innerHTML!==w?!1:!0},z=function(a){g(a)||x(a)||(a.innerHTML=w)},A=function(b,c){for(;b;){if(c(b))return b;if(a(b))break;b=b.parentNode}return null},B=function(b,c){for(b=b.parentNode;b&&1===x(b);){if(c(b))return b;if(a(b))break;b=b.parentNode}return null},C=function(b,c){c=c||func.fail;var d=[];return A(b,function(b){return a(b)||d.push(b),c(b)}),d},D=function(a,b){var c=C(a);return list.last(c.filter(b))},E=function(a,b){for(var c=C(a),d=b;d;d=d.parentNode)if($.inArray(d,c)>-1)return d;return null},F=function(a,b){b=b||func.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.previousSibling;return c},G=function(a,b){b=b||func.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c},H=function(a,b){var c=[];return b=b||func.ok,function d(e){a!==e&&b(e)&&c.push(e);for(var f=0,g=e.childNodes.length;g>f;f++)d(e.childNodes[f])}(a),c},I=function(a,b){var c=a.parentNode,d=$("<"+b+">")[0];return c.insertBefore(d,a),d.appendChild(a),d},J=function(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a},K=function(a,b){return $.each(b,function(b,c){a.appendChild(c)}),a},L=function(a){return 0===a.offset},M=function(a){return a.offset===x(a.node)},N=function(a){return L(a)||M(a)},O=function(a,b){for(;a&&a!==b;){if(0!==Q(a))return!1;a=a.parentNode}return!0},P=function(a,b){for(;a&&a!==b;){if(Q(a)!==x(a.parentNode)-1)return!1;a=a.parentNode}return!0},Q=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},R=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},S=function(b,c){var d,e;if(0===b.offset){if(a(b.node))return null;d=b.node.parentNode,e=Q(b.node)}else R(b.node)?(d=b.node.childNodes[b.offset-1],e=x(d)):(d=b.node,e=c?0:b.offset-1);return{node:d,offset:e}},T=function(b,c){var d,e;if(x(b.node)===b.offset){if(a(b.node))return null;d=b.node.parentNode,e=Q(b.node)+1}else R(b.node)?(d=b.node.childNodes[b.offset],e=0):(d=b.node,e=c?x(b.node):b.offset+1);return{node:d,offset:e}},U=function(a,b){return a.node===b.node&&a.offset===b.offset},V=function(a){if(f(a.node)||!R(a.node)||y(a.node))return!0;var b=a.node.childNodes[a.offset-1],c=a.node.childNodes[a.offset];return b&&!g(b)||c&&!g(c)?!1:!0},W=function(a,b){for(;a;){if(b(a))return a;a=S(a)}return null},X=function(a,b){for(;a;){if(b(a))return a;a=T(a)}return null},Y=function(a){if(!f(a.node))return!1;var b=a.node.nodeValue.charAt(a.offset-1);return b&&" "!==b&&b!==NBSP_CHAR},Z=function(a,b,c,d){for(var e=a;e&&(c(e),!U(e,b));){var f=d&&a.node!==e.node&&b.node!==e.node;e=T(e,f)}},_=function(a,b){var c=C(b,func.eq(a));return $.map(c,Q).reverse()},aa=function(a,b){for(var c=a,d=0,e=b.length;e>d;d++)c=c.childNodes.length<=b[d]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[d]];return c},ba=function(a,b){var c=b&&b.isSkipPaddingBlankHTML,d=b&&b.isNotSplitEdgePoint;if(N(a)&&(f(a.node)||d)){if(L(a))return a.node;if(M(a))return a.node.nextSibling}if(f(a.node))return a.node.splitText(a.offset);var e=a.node.childNodes[a.offset],g=J(a.node.cloneNode(!1),a.node);return K(g,G(e)),c||(z(a.node),z(g)),g},ca=function(a,b,c){var d=C(b.node,func.eq(a));return d.length?1===d.length?ba(b,c):d.reduce(function(a,d){return a===b.node&&(a=ba(b,c)),ba({node:d,offset:a?dom.position(a):x(d)},c)}):null},da=function(a,b){var c,d,e=b?h:p,f=C(a.node,e),g=list.last(f)||a.node;e(g)?(c=f[f.length-2],d=g):(c=g,d=c.parentNode);var i=c&&ca(c,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b});return i||d!==a.node||(i=a.node.childNodes[a.offset]),{rightNode:i,container:d}},ea=function(a){return document.createElement(a)},fa=function(a){return document.createTextNode(a)},ga=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){var d,e,f=[];for(d=0,e=a.childNodes.length;e>d;d++)f.push(a.childNodes[d]);for(d=0,e=f.length;e>d;d++)c.insertBefore(f[d],a)}c.removeChild(a)}},ha=function(b,c){for(;b&&!a(b)&&c(b);){var d=b.parentNode;ga(b),b=d}},ia=function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var c=ea(b);return a.style.cssText&&(c.style.cssText=a.style.cssText),K(c,list.from(a.childNodes)),J(c,a),ga(a),c},ja=e("TEXTAREA"),ka=function(a,b){var c=ja(a[0])?a.val():a.html();return b?c.replace(/[\n\r]/g,""):c},la=function(a,b){var c=ka(a);if(b){var d=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;c=c.replace(d,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),c=$.trim(c)}return c};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:w,emptyPara:"<p>"+w+"</p>",makePredByNodeName:e,isEditable:a,isControlSizing:b,buildLayoutInfo:c,makeLayoutInfo:d,isText:f,isVoid:g,isPara:h,isPurePara:j,isInline:l,isBlock:func.not(l),isBodyInline:s,isBody:t,isParaInline:r,isList:m,isTable:k,isCell:n,isBlockquote:o,isBodyContainer:p,isAnchor:q,isDiv:e("DIV"),isLi:i,isBR:e("BR"),isSpan:e("SPAN"),isB:e("B"),isU:e("U"),isS:e("S"),isI:e("I"),isImg:e("IMG"),isTextarea:ja,isEmpty:y,isEmptyAnchor:func.and(q,y),isClosestSibling:u,withClosestSiblings:v,nodeLength:x,isLeftEdgePoint:L,isRightEdgePoint:M,isEdgePoint:N,isLeftEdgeOf:O,isRightEdgeOf:P,prevPoint:S,nextPoint:T,isSamePoint:U,isVisiblePoint:V,prevPointUntil:W,nextPointUntil:X,isCharPoint:Y,walkPoint:Z,ancestor:A,singleChildAncestor:B,listAncestor:C,lastAncestor:D,listNext:G,listPrev:F,listDescendant:H,commonAncestor:E,wrap:I,insertAfter:J,appendChildNodes:K,position:Q,hasChildren:R,makeOffsetPath:_,fromOffsetPath:aa,splitTree:ca,splitPoint:da,create:ea,createText:fa,remove:ga,removeWhile:ha,replace:ia,html:la,value:ka}}(),range=function(){var a=function(a,b){var c,d,e=a.parentElement(),f=document.body.createTextRange(),g=list.from(e.childNodes);for(c=0;c<g.length;c++)if(!dom.isText(g[c])){if(f.moveToElementText(g[c]),f.compareEndPoints("StartToStart",a)>=0)break;d=g[c]}if(0!==c&&dom.isText(g[c-1])){var h=document.body.createTextRange(),i=null;h.moveToElementText(d||e),h.collapse(!d),i=d?d.nextSibling:e.firstChild;var j=a.duplicate();j.setEndPoint("StartToStart",h);for(var k=j.text.replace(/[\r\n]/g,"").length;k>i.nodeValue.length&&i.nextSibling;)k-=i.nodeValue.length,i=i.nextSibling;{i.nodeValue}b&&i.nextSibling&&dom.isText(i.nextSibling)&&k===i.nodeValue.length&&(k-=i.nodeValue.length,i=i.nextSibling),e=i,c=k}return{cont:e,offset:c}},b=function(a){var b=function(a,c){var d,e;if(dom.isText(a)){var f=dom.listPrev(a,func.not(dom.isText)),g=list.last(f).previousSibling;d=g||a.parentNode,c+=list.sum(list.tail(f),dom.nodeLength),e=!g}else{if(d=a.childNodes[c]||a,dom.isText(d))return b(d,0);c=0,e=!1}return{node:d,collapseToStart:e,offset:c}},c=document.body.createTextRange(),d=b(a.node,a.offset);return c.moveToElementText(d.node),c.collapse(d.collapseToStart),c.moveStart("character",d.offset),c},c=function(a,d,e,f){this.sc=a,this.so=d,this.ec=e,this.eo=f;var g=function(){if(agent.isW3CRangeSupport){var c=document.createRange();return c.setStart(a,d),c.setEnd(e,f),c}var g=b({node:a,offset:d});return g.setEndPoint("EndToEnd",b({node:e,offset:f})),g};this.getPoints=function(){return{sc:a,so:d,ec:e,eo:f}},this.getStartPoint=function(){return{node:a,offset:d}},this.getEndPoint=function(){return{node:e,offset:f}},this.select=function(){var a=g();if(agent.isW3CRangeSupport){var b=document.getSelection();b.rangeCount>0&&b.removeAllRanges(),b.addRange(a)}else a.select();return this},this.scrollIntoView=function(){return this.sc.scrollIntoView&&this.sc.scrollIntoView(!1),this},this.focus=function(){return this.sc.focus(),this},this.normalize=function(){var a=function(a){return dom.isVisiblePoint(a)||(a=dom.isLeftEdgePoint(a)?dom.nextPointUntil(a,dom.isVisiblePoint):dom.prevPointUntil(a,dom.isVisiblePoint)),a},b=a(this.getStartPoint()),d=a(this.getEndPoint());return new c(b.node,b.offset,d.node,d.offset)},this.nodes=function(a,b){a=a||func.ok;var c=b&&b.includeAncestor,d=b&&b.fullyContains,e=this.getStartPoint(),f=this.getEndPoint(),g=[],h=[];return dom.walkPoint(e,f,function(b){if(!dom.isEditable(b.node)){var e;d?(dom.isLeftEdgePoint(b)&&h.push(b.node),dom.isRightEdgePoint(b)&&list.contains(h,b.node)&&(e=b.node)):e=c?dom.ancestor(b.node,a):b.node,e&&a(e)&&g.push(e)}},!0),list.unique(g)},this.commonAncestor=function(){return dom.commonAncestor(a,e)},this.expand=function(b){var g=dom.ancestor(a,b),h=dom.ancestor(e,b);if(!g&&!h)return new c(a,d,e,f);var i=this.getPoints();return g&&(i.sc=g,i.so=0),h&&(i.ec=h,i.eo=dom.nodeLength(h)),new c(i.sc,i.so,i.ec,i.eo)},this.collapse=function(b){return b?new c(a,d,a,d):new c(e,f,e,f)},this.splitText=function(){var b=a===e,g=this.getPoints();return dom.isText(e)&&!dom.isEdgePoint(this.getEndPoint())&&e.splitText(f),dom.isText(a)&&!dom.isEdgePoint(this.getStartPoint())&&(g.sc=a.splitText(d),g.so=0,b&&(g.ec=g.sc,g.eo=f-d)),new c(g.sc,g.so,g.ec,g.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var a=this.splitText(),b=a.nodes(null,{fullyContains:!0}),d=dom.prevPointUntil(a.getStartPoint(),function(a){return!list.contains(b,a.node)}),e=[];return $.each(b,function(a,b){var c=b.parentNode;d.node!==c&&1===dom.nodeLength(c)&&e.push(c),dom.remove(b,!1)}),$.each(e,function(a,b){dom.remove(b,!1)}),new c(d.node,d.offset,d.node,d.offset).normalize()};var h=function(b){return function(){var c=dom.ancestor(a,b);return!!c&&c===dom.ancestor(e,b)}};this.isOnEditable=h(dom.isEditable),this.isOnList=h(dom.isList),this.isOnAnchor=h(dom.isAnchor),this.isOnCell=h(dom.isCell),this.isLeftEdgeOf=function(a){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var b=dom.ancestor(this.sc,a);return b&&dom.isLeftEdgeOf(this.sc,b)},this.isCollapsed=function(){return a===e&&d===f},this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(a)&&dom.isEmpty(a))return a.innerHTML=dom.emptyPara,new c(a.firstChild,0,a.firstChild,0);if(dom.isParaInline(a)||dom.isPara(a))return this.normalize();var b;if(dom.isInline(a)){var e=dom.listAncestor(a,func.not(dom.isInline));b=list.last(e),dom.isInline(b)||(b=e[e.length-2]||a.childNodes[d])}else b=a.childNodes[d>0?d-1:0];var f=dom.listPrev(b,dom.isParaInline).reverse();if(f=f.concat(dom.listNext(b.nextSibling,dom.isParaInline)),f.length){var g=dom.wrap(list.head(f),"p");dom.appendChildNodes(g,list.tail(f))}return this.normalize()},this.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents(),c=dom.splitPoint(b.getStartPoint(),dom.isInline(a));return c.rightNode?c.rightNode.parentNode.insertBefore(a,c.rightNode):c.container.appendChild(a),a},this.pasteHTML=function(a){var b=this,c=$("<div></div>").html(a)[0],d=list.from(c.childNodes);return this.wrapBodyInlineWithPara().deleteContents(),$.map(d.reverse(),function(a){return b.insertNode(a)}).reverse()},this.toString=function(){var a=g();return agent.isW3CRangeSupport?a.toString():a.text},this.getWordRange=function(a){var b=this.getEndPoint();if(!dom.isCharPoint(b))return this;var d=dom.prevPointUntil(b,function(a){return!dom.isCharPoint(a)});return a&&(b=dom.nextPointUntil(b,function(a){return!dom.isCharPoint(a)})),new c(d.node,d.offset,b.node,b.offset)},this.bookmark=function(b){return{s:{path:dom.makeOffsetPath(b,a),offset:d},e:{path:dom.makeOffsetPath(b,e),offset:f}}},this.paraBookmark=function(b){return{s:{path:list.tail(dom.makeOffsetPath(list.head(b),a)),offset:d},e:{path:list.tail(dom.makeOffsetPath(list.last(b),e)),offset:f}}},this.getClientRects=function(){var a=g();return a.getClientRects()}};return{create:function(b,d,e,f){if(arguments.length)2===arguments.length&&(e=b,f=d);else if(agent.isW3CRangeSupport){var g=document.getSelection();if(0===g.rangeCount)return null;if(dom.isBody(g.anchorNode))return null;var h=g.getRangeAt(0);b=h.startContainer,d=h.startOffset,e=h.endContainer,f=h.endOffset}else{var i=document.selection.createRange(),j=i.duplicate();j.collapse(!1);var k=i;k.collapse(!0);var l=a(k,!0),m=a(j,!1);dom.isText(l.node)&&dom.isLeftEdgePoint(l)&&dom.isTextNode(m.node)&&dom.isRightEdgePoint(m)&&m.node.nextSibling===l.node&&(l=m),b=l.cont,d=l.offset,e=m.cont,f=m.offset}return new c(b,d,e,f)},createFromNode:function(a){var b=a,c=0,d=a,e=dom.nodeLength(d);return dom.isVoid(b)&&(c=dom.listPrev(b).length-1,b=b.parentNode),dom.isBR(d)?(e=dom.listPrev(d).length-1,d=d.parentNode):dom.isVoid(d)&&(e=dom.listPrev(d).length,d=d.parentNode),this.create(b,c,d,e)},createFromBookmark:function(a,b){var d=dom.fromOffsetPath(a,b.s.path),e=b.s.offset,f=dom.fromOffsetPath(a,b.e.path),g=b.e.offset;return new c(d,e,f,g)},createFromParaBookmark:function(a,b){var d=a.s.offset,e=a.e.offset,f=dom.fromOffsetPath(list.head(b),a.s.path),g=dom.fromOffsetPath(list.last(b),a.e.path);return new c(f,d,g,e)}}}(),defaults={version:"1.0.0",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(a){return-1!==a.indexOf("@")&&-1===a.indexOf(":")?a="mailto:"+a:-1===a.indexOf("://")&&(a="http://"+a),a},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},upload=function(){function a(a,b,c,d,e){var f=$.summernote.options.tmcApi.upload,g=a,h=new FormData;h.append("media",g);var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&d(i.responseText),4===i.readyState&&500===i.status&&e(i)},i.onerror=function(){e(i)},i.upload.onprogress=function(a){var b=a.loaded,d=a.total,e=Math.floor(100*b/d);c(e)},i.open("post",f),i.send(h),b()}return{upload:a}}(),async=function(){var a=function(a){return upload.upload(a,function(){},function(){},function(){},function(){}),$.Deferred(function(b){$.extend(new FileReader,{onload:function(a){var c=a.target.result;b.resolve(c)},onerror:function(){b.reject(this)}}).readAsDataURL(a)}).promise()},b=function(a,b){return $.Deferred(function(c){var d=$("<img>");d.one("load",function(){d.off("error abort"),c.resolve(d)}).one("error abort",function(){d.off("load").detach(),c.reject(d)}).css({display:"none"}).appendTo(document.body).attr({src:a,"data-filename":b})}).promise()};return{readFileAsDataURL:a,createImage:b}}(),key=function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(a){return list.contains([8,9,13,32],a)},nameFromCode:func.invertObject(a),code:a}}(),History=function(a){var b=[],c=-1,d=a[0],e=function(){var b=range.create(),c={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:a.html(),bookmark:b?b.bookmark(d):c}},f=function(b){null!==b.contents&&a.html(b.contents),null!==b.bookmark&&range.createFromBookmark(d,b.bookmark).select()};this.undo=function(){c>0&&(c--,f(b[c]))},this.redo=function(){b.length-1>c&&(c++,f(b[c]))},this.recordUndo=function(){c++,b.length>c&&(b=b.slice(0,c)),b.push(e())},this.recordUndo()},Style=function(){var a=function(a,b){if(agent.jqueryVersion<1.9){var c={};return $.each(b,function(b,d){c[d]=a.css(d)}),c}return a.css.call(a,b)};this.stylePara=function(a,b){$.each(a.nodes(dom.isPara,{includeAncestor:!0}),function(a,c){$(c).css(b)})},this.styleNodes=function(a,b){a=a.splitText();var c=b&&b.nodeName||"SPAN",d=!(!b||!b.expandClosestSibling),e=!(!b||!b.onlyPartialContains);if(a.isCollapsed())return a.insertNode(dom.create(c));var f=dom.makePredByNodeName(c),g=$.map(a.nodes(dom.isText,{fullyContains:!0}),function(a){return dom.singleChildAncestor(a,f)||dom.wrap(a,c)});if(d){if(e){var h=a.nodes();f=func.and(f,function(a){return list.contains(h,a)})}return $.map(g,function(a){var b=dom.withClosestSiblings(a,f),c=list.head(b),d=list.tail(b);return $.each(d,function(a,b){dom.appendChildNodes(c,b.childNodes),dom.remove(b)}),list.head(b)})}return g},this.current=function(b,c){var d=$(dom.isText(b.sc)?b.sc.parentNode:b.sc),e=["font-family","font-size","text-align","list-style-type","line-height"],f=a(d,e)||{};if(f["font-size"]=parseInt(f["font-size"],10),f["font-bold"]=document.queryCommandState("bold")?"bold":"normal",f["font-italic"]=document.queryCommandState("italic")?"italic":"normal",f["font-underline"]=document.queryCommandState("underline")?"underline":"normal",f["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",f["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",f["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",b.isOnList()){var g=["circle","disc","disc-leading-zero","square"],h=$.inArray(f["list-style-type"],g)>-1;f["list-style"]=h?"unordered":"ordered"}else f["list-style"]="none";var i=dom.ancestor(b.sc,dom.isPara);if(i&&i.style["line-height"])f["line-height"]=i.style.lineHeight;else{var j=parseInt(f["line-height"],10)/parseInt(f["font-size"],10);f["line-height"]=j.toFixed(1)}return f.image=dom.isImg(c)&&c,f.anchor=b.isOnAnchor()&&dom.ancestor(b.sc,dom.isAnchor),f.ancestors=dom.listAncestor(b.sc,dom.isEditable),f.range=b,f}},Bullet=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var a=this,b=range.create().wrapBodyInlineWithPara(),c=b.nodes(dom.isPara,{includeAncestor:!0}),d=list.clusterBy(c,func.peq2("parentNode"));$.each(d,function(b,c){var d=list.head(c);dom.isLi(d)?a.wrapList(c,d.parentNode.nodeName):$.each(c,function(a,b){$(b).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})}),b.select()},this.outdent=function(){var a=this,b=range.create().wrapBodyInlineWithPara(),c=b.nodes(dom.isPara,{includeAncestor:!0}),d=list.clusterBy(c,func.peq2("parentNode"));$.each(d,function(b,c){var d=list.head(c);dom.isLi(d)?a.releaseList([c]):$.each(c,function(a,b){$(b).css("marginLeft",function(a,b){return b=parseInt(b,10)||0,b>25?b-25:""})})}),b.select()},this.toggleList=function(a){var b=this,c=range.create().wrapBodyInlineWithPara(),d=c.nodes(dom.isPara,{includeAncestor:!0}),e=c.paraBookmark(d),f=list.clusterBy(d,func.peq2("parentNode"));if(list.find(d,dom.isPurePara)){var g=[];$.each(f,function(c,d){g=g.concat(b.wrapList(d,a))}),d=g}else{var h=c.nodes(dom.isList,{includeAncestor:!0}).filter(function(b){return!$.nodeName(b,a)});h.length?$.each(h,function(b,c){dom.replace(c,a)}):d=this.releaseList(f,!0)}range.createFromParaBookmark(e,d).select()},this.wrapList=function(a,b){var c=list.head(a),d=list.last(a),e=dom.isList(c.previousSibling)&&c.previousSibling,f=dom.isList(d.nextSibling)&&d.nextSibling,g=e||dom.insertAfter(dom.create(b||"UL"),d);return a=$.map(a,function(a){return dom.isPurePara(a)?dom.replace(a,"LI"):a}),dom.appendChildNodes(g,a),f&&(dom.appendChildNodes(g,list.from(f.childNodes)),dom.remove(f)),a},this.releaseList=function(a,b){var c=[];return $.each(a,function(a,d){var e=list.head(d),f=list.last(d),g=b?dom.lastAncestor(e,dom.isList):e.parentNode,h=g.childNodes.length>1?dom.splitTree(g,{node:f.parentNode,offset:dom.position(f)+1},{isSkipPaddingBlankHTML:!0}):null,i=dom.splitTree(g,{node:e.parentNode,offset:dom.position(e)},{isSkipPaddingBlankHTML:!0});d=b?dom.listDescendant(i,dom.isLi):list.from(i.childNodes).filter(dom.isLi),(b||!dom.isList(g.parentNode))&&(d=$.map(d,function(a){return dom.replace(a,"P")})),$.each(list.from(d).reverse(),function(a,b){dom.insertAfter(b,g)});var j=list.compact([g,i,h]);$.each(j,function(a,b){var c=[b].concat(dom.listDescendant(b,dom.isList));$.each(c.reverse(),function(a,b){dom.nodeLength(b)||dom.remove(b,!0)})}),c=c.concat(d)}),c}},Typing=function(){var a=new Bullet;this.insertTab=function(a,b,c){var d=dom.createText(new Array(c+1).join(dom.NBSP_CHAR));b=b.deleteContents(),b.insertNode(d,!0),b=range.create(d,c),b.select()},this.insertParagraph=function(){var b=range.create();b=b.deleteContents(),b=b.wrapBodyInlineWithPara();var c,d=dom.ancestor(b.sc,dom.isPara);if(d){if(dom.isEmpty(d)&&dom.isLi(d))return void a.toggleList(d.parentNode.nodeName);c=dom.splitTree(d,b.getStartPoint());var e=dom.listDescendant(d,dom.isEmptyAnchor);e=e.concat(dom.listDescendant(c,dom.isEmptyAnchor)),$.each(e,function(a,b){dom.remove(b)})}else{var f=b.sc.childNodes[b.so];c=$(dom.emptyPara)[0],f?b.sc.insertBefore(c,f):b.sc.appendChild(c)}range.create(c,0).normalize().select().focus().scrollIntoView()}},Table=function(){this.tab=function(a,b){var c=dom.ancestor(a.commonAncestor(),dom.isCell),d=dom.ancestor(c,dom.isTable),e=dom.listDescendant(d,dom.isCell),f=list[b?"prev":"next"](e,c);f&&range.create(f,0).select()},this.createTable=function(a,b){for(var c,d=[],e=0;a>e;e++)d.push("<td>"+dom.blank+"</td>");c=d.join("");for(var f,g=[],h=0;b>h;h++)g.push("<tr>"+c+"</tr>");return f=g.join(""),$('<table class="table table-bordered">'+f+"</table>")[0]}},Editor=function(a){var b=new Style,c=new Table,d=new Typing,e=new Bullet;this.createRange=function(a){return a.focus(),range.create()},this.saveRange=function(a,b){a.focus(),a.data("range",range.create()),b&&range.create().collapse().select()},this.saveNode=function(a){for(var b=[],c=0,d=a[0].childNodes.length;d>c;c++)b.push(a[0].childNodes[c]);a.data("childNodes",b)},this.restoreRange=function(a){var b=a.data("range");b&&(b.select(),a.focus())},this.restoreNode=function(a){a.html("");for(var b=a.data("childNodes"),c=0,d=b.length;d>c;c++)a[0].appendChild(b[c])},this.currentStyle=function(a){var c=range.create();return c?c.isOnEditable()&&b.current(c,a):!1};var f=function(b){a.bindCustomEvent($(),b.data("callbacks"),"before.command").call(b.html(),b);

},g=function(b){a.bindCustomEvent($(),b.data("callbacks"),"change").call(b.html(),b)};this.undo=function(a){f(a),a.data("NoteHistory").undo(),g(a)},this.redo=function(a){f(a),a.data("NoteHistory").redo(),g(a)};for(var h=this.beforeCommand=function(a){f(a)},i=this.afterCommand=function(a,b){a.data("NoteHistory").recordUndo(),b||g(a)},j=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],k=0,l=j.length;l>k;k++)this[j[k]]=function(a){return function(b,c){h(b),document.execCommand(a,!1,c),i(b,!0)}}(j[k]);this.tab=function(a,b){var e=range.create();e.isCollapsed()&&e.isOnCell()?c.tab(e):(h(a),d.insertTab(a,e,b.tabsize),i(a))},this.untab=function(){var a=range.create();a.isCollapsed()&&a.isOnCell()&&c.tab(a,!0)},this.insertParagraph=function(a){h(a),d.insertParagraph(a),i(a)},this.insertOrderedList=function(a){h(a),e.insertOrderedList(a),i(a)},this.insertUnorderedList=function(a){h(a),e.insertUnorderedList(a),i(a)},this.indent=function(a){h(a),e.indent(a),i(a)},this.outdent=function(a){h(a),e.outdent(a),i(a)},this.insertImage=function(a,b,c){async.createImage(b,c).then(function(b){h(a),b.css({display:"",width:Math.min(a.width(),b.width())}),range.create().insertNode(b[0]),range.createFromNode(b[0]).collapse().select(),i(a)}).fail(function(){var b=a.data("callbacks");b.onImageUploadError&&b.onImageUploadError()})},this.insertNode=function(a,b){h(a);var c=this.createRange(a);c.insertNode(b),range.createFromNode(b).collapse().select(),i(a)},this.insertText=function(a,b){h(a);var c=this.createRange(a),d=c.insertNode(dom.createText(b));range.create(d,dom.nodeLength(d)).select(),i(a)},this.pasteHTML=function(a,b){h(a);var c=this.createRange(a),d=c.pasteHTML(b);range.createFromNode(list.last(d)).collapse().select(),i(a)},this.formatBlock=function(a,b){h(a),b=agent.isMSIE?"<"+b+">":b,document.execCommand("FormatBlock",!1,b),i(a)},this.formatPara=function(a){h(a),this.formatBlock(a,"P"),i(a)};for(var k=1;6>=k;k++)this["formatH"+k]=function(a){return function(b){this.formatBlock(b,"H"+a)}}(k);this.fontSize=function(a,c){h(a);var d=this.createRange(a),e=b.styleNodes(d);$.each(e,function(a,b){$(b).css({"font-size":c+"px"})}),i(a)},this.lineHeight=function(a,c){h(a),b.stylePara(range.create(),{lineHeight:c}),i(a)},this.unlink=function(a){var b=range.create();if(b.isOnAnchor()){var c=dom.ancestor(b.sc,dom.isAnchor);b=range.createFromNode(c),b.select(),h(a),document.execCommand("unlink"),i(a)}},this.createLink=function(a,c,d){var e=c.url,f=c.text,g=c.newWindow,j=c.range,k=j.toString()!==f;h(a),d.onCreateLink&&(e=d.onCreateLink(e));var l;if(k){var m=j.insertNode($("<A>"+f+"</A>")[0]);l=[m]}else l=b.styleNodes(j,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(l,function(a,b){$(b).attr("href",e),g?$(b).attr("target","_blank"):$(b).removeAttr("target")});var n=range.createFromNode(list.head(l)).collapse(!0),o=n.getStartPoint(),p=range.createFromNode(list.last(l)).collapse(),q=p.getEndPoint();range.create(o.node,o.offset,q.node,q.offset).select(),i(a)},this.getLinkInfo=function(a){a.focus();var b=range.create().expand(dom.isAnchor),c=$(list.head(b.nodes(dom.isAnchor)));return{range:b,text:b.toString(),isNewWindow:c.length?"_blank"===c.attr("target"):!1,url:c.length?c.attr("href"):""}},this.color=function(a,b){var c=JSON.parse(b),d=c.foreColor,e=c.backColor;h(a),d&&document.execCommand("foreColor",!1,d),e&&document.execCommand("backColor",!1,e),i(a)},this.insertTable=function(a,b){var d=b.split("x");h(a);var e=range.create();e=e.deleteContents(),e.insertNode(c.createTable(d[0],d[1])),i(a)},this.floatMe=function(a,b,c){h(a),c.css("float",b),i(a)},this.imageShape=function(a,b,c){h(a),c.removeClass("img-rounded img-circle img-thumbnail"),b&&c.addClass(b),i(a)},this.resize=function(a,b,c){h(a),c.css({width:100*b+"%",height:""}),i(a)},this.resizeTo=function(a,b,c){var d;if(c){var e=a.y/a.x,f=b.data("ratio");d={width:f>e?a.x:a.y/f,height:f>e?a.x*f:a.y}}else d={width:a.x,height:a.y};b.css(d)},this.removeMedia=function(b,c,d){h(b),d.detach(),a.bindCustomEvent($(),b.data("callbacks"),"media.delete").call(d,this.$editable),i(b)},this.focus=function(a){a.focus(),agent.isFF&&range.createFromNode(a[0].firstChild||a[0]).collapse().select()}},Button=function(){this.update=function(a,b){var c=function(a,b){a.find(".dropdown-menu li a").each(function(){var a=$(this).data("value")+""==b+"";this.className=a?"checked":""})},d=function(b,c){var d=a.find(b);d.toggleClass("active",c())};if(b.image){var e=$(b.image);d('button[data-event="imageShape"][data-value="img-rounded"]',function(){return e.hasClass("img-rounded")}),d('button[data-event="imageShape"][data-value="img-circle"]',function(){return e.hasClass("img-circle")}),d('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return e.hasClass("img-thumbnail")}),d('button[data-event="imageShape"]:not([data-value])',function(){return!e.is(".img-rounded, .img-circle, .img-thumbnail")});var f=e.css("float");d('button[data-event="floatMe"][data-value="left"]',function(){return"left"===f}),d('button[data-event="floatMe"][data-value="right"]',function(){return"right"===f}),d('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==f&&"right"!==f});var g=e.attr("style");return d('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(g)}),d('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(g)}),void d('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(g)})}var h=a.find(".note-fontname");if(h.length){var i=b["font-family"];if(i){for(var j=i.split(","),k=0,l=j.length;l>k&&(i=j[k].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!agent.isFontInstalled(i));k++);h.find(".note-current-fontname").text(i),c(h,i)}}var m=a.find(".note-fontsize");m.find(".note-current-fontsize").text(b["font-size"]),c(m,parseFloat(b["font-size"]));var n=a.find(".note-height");c(n,parseFloat(b["line-height"])),d('button[data-event="bold"]',function(){return"bold"===b["font-bold"]}),d('button[data-event="italic"]',function(){return"italic"===b["font-italic"]}),d('button[data-event="underline"]',function(){return"underline"===b["font-underline"]}),d('button[data-event="strikethrough"]',function(){return"strikethrough"===b["font-strikethrough"]}),d('button[data-event="superscript"]',function(){return"superscript"===b["font-superscript"]}),d('button[data-event="subscript"]',function(){return"subscript"===b["font-subscript"]}),d('button[data-event="justifyLeft"]',function(){return"left"===b["text-align"]||"start"===b["text-align"]}),d('button[data-event="justifyCenter"]',function(){return"center"===b["text-align"]}),d('button[data-event="justifyRight"]',function(){return"right"===b["text-align"]}),d('button[data-event="justifyFull"]',function(){return"justify"===b["text-align"]}),d('button[data-event="insertUnorderedList"]',function(){return"unordered"===b["list-style"]}),d('button[data-event="insertOrderedList"]',function(){return"ordered"===b["list-style"]})},this.updateRecentColor=function(a,b,c){var d=$(a).closest(".note-color"),e=d.find(".note-recent-color"),f=JSON.parse(e.attr("data-value"));f[b]=c,e.attr("data-value",JSON.stringify(f));var g="backColor"===b?"background-color":"color";e.find("i").css(g,c)}},Toolbar=function(){var a=new Button;this.update=function(b,c){a.update(b,c)},this.updateRecentColor=function(b,c,d){a.updateRecentColor(b,c,d)},this.activate=function(a){a.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(a){a.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(a,b){var c=a.find('button[data-event="fullscreen"]');c.toggleClass("active",b)},this.updateCodeview=function(a,b){var c=a.find('button[data-event="codeview"]');c.toggleClass("active",b),b?this.deactivate(a):this.activate(a)},this.get=function(a,b){var c=dom.makeLayoutInfo(a).toolbar();return c.find("[data-name="+b+"]")},this.setButtonState=function(a,b,c){c=c===!1?!1:!0;var d=this.get(a,b);d.toggleClass("active",c)}},EDITABLE_PADDING=24,Statusbar=function(){var a=$(document);this.attach=function(a,c){c.disableResizeEditor||a.statusbar().on("mousedown",b)};var b=function(b){b.preventDefault(),b.stopPropagation();var c=dom.makeLayoutInfo(b.target).editable(),d=c.offset().top-a.scrollTop(),e=dom.makeLayoutInfo(b.currentTarget||b.target),f=e.editor().data("options");a.on("mousemove",function(a){var b=a.clientY-(d+EDITABLE_PADDING);b=f.minHeight>0?Math.max(b,f.minHeight):b,b=f.maxHeight>0?Math.min(b,f.maxHeight):b,c.height(b)}).one("mouseup",function(){a.off("mousemove")})}},Popover=function(){var a=new Button,b=function(a,b){var c=$(a),d=b?c.offset():c.position(),e=c.outerHeight(!0);return{left:d.left,top:d.top+e}},c=function(a,b){a.css({display:"block",left:b.left,top:b.top})},d=20;this.update=function(e,f,g){a.update(e,f);var h=e.find(".note-link-popover");if(f.anchor){var i=h.find("a"),j=$(f.anchor).attr("href"),k=$(f.anchor).attr("target");i.attr("href",j).html(j),k?i.attr("target","_blank"):i.removeAttr("target"),c(h,b(f.anchor,g))}else h.hide();var l=e.find(".note-image-popover");f.image?c(l,b(f.image,g)):l.hide();var m=e.find(".note-air-popover");if(g&&!f.range.isCollapsed()){var n=list.last(f.range.getClientRects());if(n){var o=func.rect2bnd(n);c(m,{left:Math.max(o.left+o.width/2-d,0),top:o.top+o.height})}}else m.hide()},this.updateRecentColor=function(a,b,c){a.updateRecentColor(a,b,c)},this.hide=function(a){a.children().hide()}},Handle=function(a){var b=$(document),c=function(c){if(dom.isControlSizing(c.target)){c.preventDefault(),c.stopPropagation();var d=dom.makeLayoutInfo(c.target),e=d.handle(),f=d.popover(),g=d.editable(),h=d.editor(),i=e.find(".note-control-selection").data("target"),j=$(i),k=j.offset(),l=b.scrollTop(),m=h.data("options").airMode;b.on("mousemove",function(b){a.invoke("editor.resizeTo",{x:b.clientX-k.left,y:b.clientY-(k.top-l)},j,!b.shiftKey),a.invoke("handle.update",e,{image:i},m),a.invoke("popover.update",f,{image:i},m)}).one("mouseup",function(){b.off("mousemove"),a.invoke("editor.afterCommand",g)}),j.data("ratio")||j.data("ratio",j.height()/j.width())}};this.attach=function(a){a.handle().on("mousedown",c)},this.update=function(a,b,c){var d=a.find(".note-control-selection");if(b.image){var e=$(b.image),f=c?e.offset():e.position(),g={w:e.outerWidth(!0),h:e.outerHeight(!0)};d.css({display:"block",left:f.left,top:f.top,width:g.w,height:g.h}).data("target",b.image);var h=g.w+"x"+g.h;d.find(".note-control-selection-info").text(h)}else d.hide()},this.hide=function(a){a.children().hide()}},Fullscreen=function(a){var b=$(window),c=$("html, body");this.toggle=function(d){var e=d.editor(),f=d.toolbar(),g=d.editable(),h=d.codable(),i=function(a){g.css("height",a.h),h.css("height",a.h),h.data("cmeditor")&&h.data("cmeditor").setsize(null,a.h)};e.toggleClass("fullscreen");var j=e.hasClass("fullscreen");j?(g.data("orgheight",g.css("height")),b.on("resize",function(){i({h:b.height()-f.outerHeight()})}).trigger("resize"),c.css("overflow","hidden")):(b.off("resize"),i({h:g.data("orgheight")}),c.css("overflow","visible")),a.invoke("toolbar.updateFullscreen",f,j)}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["CodeMirror"],function(a){CodeMirror=a}):CodeMirror=window.CodeMirror);var Codeview=function(a){this.sync=function(b){var c=a.invoke("codeview.isActivated",b);c&&agent.hasCodeMirror&&b.codable().data("cmEditor").save()},this.isActivated=function(a){var b=a.editor();return b.hasClass("codeview")},this.toggle=function(a){this.isActivated(a)?this.deactivate(a):this.activate(a)},this.activate=function(b){var c=b.editor(),d=b.toolbar(),e=b.editable(),f=b.codable(),g=b.popover(),h=b.handle(),i=c.data("options");if(f.val(dom.html(e,i.prettifyHtml)),f.height(e.height()),a.invoke("toolbar.updateCodeview",d,!0),a.invoke("popover.hide",g),a.invoke("handle.hide",h),c.addClass("codeview"),f.focus(),agent.hasCodeMirror){var j=CodeMirror.fromTextArea(f[0],i.codemirror);if(i.codemirror.tern){var k=new CodeMirror.TernServer(i.codemirror.tern);j.ternServer=k,j.on("cursorActivity",function(a){k.updateArgHints(a)})}j.setSize(null,e.outerHeight()),f.data("cmEditor",j)}},this.deactivate=function(b){var c=b.editor(),d=b.toolbar(),e=b.editable(),f=b.codable(),g=c.data("options");if(agent.hasCodeMirror){var h=f.data("cmEditor");f.val(h.getValue()),h.toTextArea()}e.html(dom.value(f,g.prettifyHtml)||dom.emptyPara),e.height(g.height?f.height():"auto"),c.removeClass("codeview"),e.focus(),a.invoke("toolbar.updateCodeview",d,!1)}},DragAndDrop=function(a){var b=$(document);this.attach=function(a,c){c.airMode||c.disableDragAndDrop?b.on("drop",function(a){a.preventDefault()}):this.attachDragAndDropEvent(a,c)},this.attachDragAndDropEvent=function(c,d){var e=$(),f=c.editor(),g=c.dropzone(),h=g.find(".note-dropzone-message");b.on("dragenter",function(b){var i=a.invoke("codeview.isActivated",c),j=f.width()>0&&f.height()>0;i||e.length||!j||(f.addClass("dragover"),g.width(f.width()),g.height(f.height()),h.text(d.langInfo.image.dragImageHere)),e=e.add(b.target)}).on("dragleave",function(a){e=e.not(a.target),e.length||f.removeClass("dragover")}).on("drop",function(){e=$(),f.removeClass("dragover")}),g.on("dragenter",function(){g.addClass("hover"),h.text(d.langInfo.image.dropImage)}).on("dragleave",function(){g.removeClass("hover"),h.text(d.langInfo.image.dragImageHere)}),g.on("drop",function(b){b.preventDefault();var c=b.originalEvent.dataTransfer,d=c.getData("text/html"),e=c.getData("text/plain"),f=dom.makeLayoutInfo(b.currentTarget||b.target);c&&c.files&&c.files.length?(f.editable().focus(),a.insertImages(f,c.files)):d?$(d).each(function(){f.editable().focus(),a.invoke("editor.insertNode",f.editable(),this)}):e&&(f.editable().focus(),a.invoke("editor.insertText",f.editable(),e))}).on("dragover",!1)}},Clipboard=function(a){this.attach=function(a){a.editable().on("paste",b)};var b=function(b){var c=b.originalEvent.clipboardData,d=dom.makeLayoutInfo(b.currentTarget||b.target),e=d.editable();if(!c||!c.items||!c.items.length){var f=e.data("callbacks");if(!f.onImageUpload)return;return a.invoke("editor.saveNode",e),a.invoke("editor.saveRange",e),e.html(""),void setTimeout(function(){var b=e.find("img");if(b.length&&-1!==b[0].src.indexOf("data:")){for(var c=b[0].src,f=atob(c.split(",")[1]),g=new Uint8Array(f.length),h=0;h<f.length;h++)g[h]=f.charCodeAt(h);var i=new Blob([g],{type:"image/png"});i.name="clipboard.png",a.invoke("editor.restoreNode",e),a.invoke("editor.restoreRange",e),a.insertImages(d,[i]),a.invoke("editor.afterCommand",e)}else{var j=e.html();a.invoke("editor.restoreNode",e),a.invoke("editor.restoreRange",e),a.invoke("editor.focus",e);try{a.invoke("editor.pasteHTML",e,j)}catch(k){a.invoke("editor.insertText",e,j)}}},0)}var g=list.head(c.items),h="file"===g.kind&&-1!==g.type.indexOf("image/");h&&a.insertImages(d,[g.getAsFile()]),a.invoke("editor.afterCommand",e)}},LinkDialog=function(a){var b=function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)},c=function(a,b){a.on("keypress",function(a){a.keyCode===key.code.ENTER&&b.trigger("click")})};this.showLinkDialog=function(a,d,e){return $.Deferred(function(a){var f=d.find(".note-link-dialog"),g=f.find(".note-link-text"),h=f.find(".note-link-url"),i=f.find(".note-link-btn"),j=f.find("input[type=checkbox]");f.one("shown.bs.modal",function(){g.val(e.text),g.on("input",function(){e.text=g.val()}),e.url||(e.url=e.text,b(i,e.text)),h.on("input",function(){b(i,h.val()),e.text||g.val(h.val())}).val(e.url).trigger("focus").trigger("select"),c(h,i),c(g,i),j.prop("checked",e.newWindow),i.one("click",function(b){b.preventDefault(),a.resolve({range:e.range,url:h.val(),text:g.val(),newWindow:j.is(":checked")}),f.modal("hide")})}).one("hidden.bs.modal",function(){g.off("input keypress"),h.off("input keypress"),i.off("click"),"pending"===a.state()&&a.reject()}).modal("show")}).promise()},this.show=function(b){var c=b.editor(),d=b.dialog(),e=b.editable(),f=b.popover(),g=a.invoke("editor.getLinkInfo",e),h=c.data("options");a.invoke("editor.saveRange",e),this.showLinkDialog(e,d,g).then(function(b){a.invoke("editor.restoreRange",e),a.invoke("editor.createLink",e,b,h),a.invoke("popover.hide",f)}).fail(function(){a.invoke("editor.restoreRange",e)})}},ImageDialog=function(a){var b=function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)},c=function(a,b){a.on("keypress",function(a){a.keyCode===key.code.ENTER&&b.trigger("click")})};this.show=function(b){var c=b.dialog(),d=b.editable();a.invoke("editor.saveRange",d),this.showImageDialog(d,c).then(function(c){a.invoke("editor.restoreRange",d),"string"==typeof c?a.invoke("editor.insertImage",d,c):a.insertImages(b,c)}).fail(function(){a.invoke("editor.restoreRange",d)})},this.showImageDialog=function(a,d){return $.Deferred(function(a){var e=d.find(".note-image-dialog"),f=d.find(".note-image-input"),g=d.find(".note-image-url"),h=d.find(".note-image-btn");e.one("shown.bs.modal",function(){f.replaceWith(f.clone().on("change",function(){a.resolve(this.files||this.value),e.modal("hide")}).val("")),h.click(function(b){b.preventDefault(),a.resolve(g.val()),e.modal("hide")}),g.on("keyup paste",function(a){var c;c="paste"===a.type?a.originalEvent.clipboardData.getData("text"):g.val(),b(h,c)}).val("").trigger("focus"),c(g,h)}).one("hidden.bs.modal",function(){f.off("change"),g.off("keyup paste keypress"),h.off("click"),"pending"===a.state()&&a.reject()}).modal("show")})}},HelpDialog=function(a){this.showHelpDialog=function(a,b){return $.Deferred(function(a){var c=b.find(".note-help-dialog");c.one("hidden.bs.modal",function(){a.resolve()}).modal("show")}).promise()},this.show=function(b){var c=b.dialog(),d=b.editable();a.invoke("editor.saveRange",d,!0),this.showHelpDialog(d,c).then(function(){a.invoke("editor.restoreRange",d)})}},EventHandler=function(){var a=this.modules={editor:new Editor(this),toolbar:new Toolbar(this),statusbar:new Statusbar(this),popover:new Popover(this),handle:new Handle(this),fullscreen:new Fullscreen(this),codeview:new Codeview(this),dragAndDrop:new DragAndDrop(this),clipboard:new Clipboard(this),linkDialog:new LinkDialog(this),imageDialog:new ImageDialog(this),helpDialog:new HelpDialog(this)};this.invoke=function(){var a=list.head(list.from(arguments)),b=list.tail(list.from(arguments)),c=a.split("."),d=c.length>1,e=d&&list.head(c),f=d?list.last(c):list.head(c),g=this.getModule(e),h=g[f];return h&&h.apply(g,b)},this.getModule=function(a){return this.modules[a]||this.modules.editor};var b=this.bindCustomEvent=function(a,b,c){return function(){var d=b[func.namespaceToCamel(c,"on")];return d&&d(arguments),a.trigger("summernote."+c,arguments)}};this.insertImages=function(c,d){var e=c.editor(),f=c.editable(),g=c.holder(),h=f.data("callbacks"),i=e.data("options");h.onImageUpload?b(g,h,"image.upload")([d]):$.each(d,function(c,d){var e=d.name;i.maximumImageFileSize&&i.maximumImageFileSize<d.size?b(g,h,"image.upload.error")(i.langInfo.image.maximumFileSizeError):async.readFileAsDataURL(d).then(function(b){a.editor.insertImage(f,b,e)}).fail(function(){b(g,h,"image.upload.error")(i.langInfo.image.maximumFileSizeError)})})};var c={showLinkDialog:function(b){a.linkDialog.show(b)},showImageDialog:function(b){a.imageDialog.show(b)},showHelpDialog:function(b){a.helpDialog.show(b)},fullscreen:function(b){a.fullscreen.toggle(b)},codeview:function(b){a.codeview.toggle(b)}},d=function(a){dom.isImg(a.target)&&a.preventDefault()},e=function(b){setTimeout(function(){var c=dom.makeLayoutInfo(b.currentTarget||b.target),d=a.editor.currentStyle(b.target);if(d){var e=c.editor().data("options").airMode;e||a.toolbar.update(c.toolbar(),d),a.popover.update(c.popover(),d,e),a.handle.update(c.handle(),d,e)}},0)},f=function(b){var c=dom.makeLayoutInfo(b.currentTarget||b.target);a.popover.hide(c.popover()),a.handle.hide(c.handle())},g=function(a){var b=$(a.target).closest("[data-event]");b.length&&a.preventDefault()},h=function(b){var d=$(b.target).closest("[data-event]");if(d.length){var f,g=d.attr("data-event"),h=d.attr("data-value"),i=d.attr("data-hide"),j=dom.makeLayoutInfo(b.target);if(-1!==$.inArray(g,["resize","floatMe","removeMedia","imageShape"])){var k=j.handle().find(".note-control-selection");f=$(k.data("target"))}if(i&&d.parents(".popover").hide(),$.isFunction($.summernote.pluginEvents[g]))$.summernote.pluginEvents[g](b,a.editor,j,h);else if(a.editor[g]){var l=j.editable();l.focus(),a.editor[g](l,h,f),b.preventDefault()}else c[g]&&(c[g].call(this,j),b.preventDefault());if(-1!==$.inArray(g,["backColor","foreColor"])){var m=j.editor().data("options",m),n=m.airMode?a.popover:a.toolbar;n.updateRecentColor(list.head(d),g,h)}e(b)}},i=18,j=function(a,b){var c,d=$(a.target.parentNode),e=d.next(),f=d.find(".note-dimension-picker-mousecatcher"),g=d.find(".note-dimension-picker-highlighted"),h=d.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var j=$(a.target).offset();c={x:a.pageX-j.left,y:a.pageY-j.top}}else c={x:a.offsetX,y:a.offsetY};var k={c:Math.ceil(c.x/i)||1,r:Math.ceil(c.y/i)||1};g.css({width:k.c+"em",height:k.r+"em"}),f.attr("data-value",k.c+"x"+k.r),3<k.c&&k.c<b.insertTableMaxSize.col&&h.css({width:k.c+1+"em"}),3<k.r&&k.r<b.insertTableMaxSize.row&&h.css({height:k.r+1+"em"}),e.html(k.c+" x "+k.r)};this.bindKeyMap=function(b,d){var e=b.editor(),f=b.editable();f.on("keydown",function(g){var h=[];g.metaKey&&h.push("CMD"),g.ctrlKey&&!g.altKey&&h.push("CTRL"),g.shiftKey&&h.push("SHIFT");var i=key.nameFromCode[g.keyCode];i&&h.push(i);var j=d[h.join("+")];if(j)if($.summernote.pluginEvents[j]){var k=$.summernote.pluginEvents[j];$.isFunction(k)&&k(g,a.editor,b)}else a.editor[j]?(a.editor[j](f,e.data("options")),g.preventDefault()):c[j]&&(c[j].call(this,b),g.preventDefault());else key.isEdit(g.keyCode)&&a.editor.afterCommand(f)})},this.attach=function(b,c){c.shortcuts&&this.bindKeyMap(b,c.keyMap[agent.isMac?"mac":"pc"]),b.editable().on("mousedown",d),b.editable().on("keyup mouseup",e),b.editable().on("scroll",f),a.clipboard.attach(b,c),a.handle.attach(b,c),b.popover().on("click",h),b.popover().on("mousedown",g),a.dragAndDrop.attach(b,c),c.airMode||(b.toolbar().on("click",h),b.toolbar().on("mousedown",g),a.statusbar.attach(b,c));var i=c.airMode?b.popover():b.toolbar(),k=i.find(".note-dimension-picker-mousecatcher");k.css({width:c.insertTableMaxSize.col+"em",height:c.insertTableMaxSize.row+"em"}).on("mousemove",function(a){j(a,c)}),b.editor().data("options",c),agent.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,c.styleWithSpan)},0);var l=new History(b.editable());b.editable().data("NoteHistory",l),b.editable().data("callbacks",{onInit:c.onInit,onFocus:c.onFocus,onBlur:c.onBlur,onKeydown:c.onKeydown,onKeyup:c.onKeyup,onMousedown:c.onMousedown,onEnter:c.onEnter,onPaste:c.onPaste,onBeforeCommand:c.onBeforeCommand,onChange:c.onChange,onImageUpload:c.onImageUpload,onImageUploadError:c.onImageUploadError,onMediaDelete:c.onMediaDelete}),dom.isTextarea(list.head(b.holder()))&&b.holder().closest("form").submit(function(){var a=b.holder().code();b.holder().val(a),c.onsubmit&&c.onsubmit(a)})},this.attachCustomEvent=function(a,c){var d=a.holder(),e=a.editable(),f=e.data("callbacks");if(e.focus(b(d,f,"focus")),e.blur(b(d,f,"blur")),e.keydown(function(a){a.keyCode===key.code.ENTER&&b(d,f,"enter").call(this,a),b(d,f,"keydown").call(this,a)}),e.keyup(b(d,f,"keyup")),e.on("mousedown",b(d,f,"mousedown")),e.on("mouseup",b(d,f,"mouseup")),e.on("scroll",b(d,f,"scroll")),e.on("paste",b(d,f,"paste")),agent.isMSIE){var g="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";e.on(g,b(d,f,"change"))}else e.on("input",b(d,f,"change"));c.airMode||(a.toolbar().click(b(d,f,"toolbar.click")),a.popover().click(b(d,f,"popover.click"))),dom.isTextarea(list.head(d))&&d.closest("form").submit(function(a){b(d,f,"submit").call(this,a,d.code())}),b(d,f,"init")(a);for(var h=0,i=$.summernote.plugins.length;i>h;h++)$.isFunction($.summernote.plugins[h].init)&&$.summernote.plugins[h].init(a)},this.detach=function(a,b){a.holder().off(),a.editable().off(),a.popover().off(),a.handle().off(),a.dialog().off(),b.airMode||(a.dropzone().off(),a.toolbar().off(),a.statusbar().off())}},Renderer=function(){var a=function(a,b){var c=b.event,d=b.value,e=b.title,f=b.className,g=b.dropdown,h=b.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(f?" "+f:"")+(g?" dropdown-toggle":"")+'"'+(g?' data-toggle="dropdown"':"")+(e?' title="'+e+'"':"")+(c?' data-event="'+c+'"':"")+(d?" data-value='"+d+"'":"")+(h?" data-hide='"+h+"'":"")+' tabindex="-1">'+a+(g?' <span class="caret"></span>':"")+"</button>"+(g||"")},b=function(b,c){var d='<i class="'+b+'"></i>';return a(d,c)},c=function(a,b){var c=$('<div class="'+a+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return c.find(".popover-content").append(b),c},d=function(a,b,c,d){return'<div class="'+a+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(b?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+b+"</h4></div>":"")+'<div class="modal-body">'+c+"</div>"+(d?'<div class="modal-footer">'+d+"</div>":"")+"</div></div></div>"},e={picture:function(a,c){return b(c.iconPrefix+"picture-o",{event:"showImageDialog",title:a.image.image,hide:!0})},link:function(a,c){return b(c.iconPrefix+"link",{event:"showLinkDialog",title:a.link.link,hide:!0})},table:function(a,c){var d='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return b(c.iconPrefix+"table",{title:a.table.table,dropdown:d})},style:function(a,c){var d=c.styleTags.reduce(function(b,c){var d=a.style["p"===c?"normal":c];return b+'<li><a data-event="formatBlock" href="#" data-value="'+c+'">'+("p"===c||"pre"===c?d:"<"+c+">"+d+"</"+c+">")+"</a></li>"},"");return b(c.iconPrefix+"magic",{title:a.style.style,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},fontname:function(b,c){var d=[],e=c.fontNames.reduce(function(a,b){return agent.isFontInstalled(b)||-1!==c.fontNamesIgnoreCheck.indexOf(b)?(d.push(b),a+'<li><a data-event="fontName" href="#" data-value="'+b+'" style="font-family:\''+b+'\'"><i class="'+c.iconPrefix+'check"></i> '+b+"</a></li>"):a},""),f=agent.isFontInstalled(c.defaultFontName),g=f?c.defaultFontName:d[0],h='<span class="note-current-fontname">'+g+"</span>";return a(h,{title:b.font.name,dropdown:'<ul class="dropdown-menu">'+e+"</ul>"})},fontsize:function(b,c){var d=c.fontSizes.reduce(function(a,b){return a+'<li><a data-event="fontSize" href="#" data-value="'+b+'"><i class="fa fa-check"></i> '+b+"</a></li>"},""),e='<span class="note-current-fontsize">11</span>';return a(e,{title:b.font.size,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},color:function(b,c){var d='<i class="'+c.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',e=a(d,{className:"note-recent-color",title:b.color.recent,event:"color",value:'{"backColor":"yellow"}'}),f='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+b.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+b.color.transparent+'">'+b.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+b.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+b.color.reset+'">'+b.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',g=a("",{title:b.color.more,dropdown:f});return e+g},bold:function(a,c){return b(c.iconPrefix+"bold",{event:"bold",title:a.font.bold})},italic:function(a,c){return b(c.iconPrefix+"italic",{event:"italic",title:a.font.italic})},underline:function(a,c){return b(c.iconPrefix+"underline",{event:"underline",title:a.font.underline})},strikethrough:function(a){return b("fa fa-strikethrough",{event:"strikethrough",title:a.font.strikethrough})},superscript:function(a){return b("fa fa-superscript",{event:"superscript",title:a.font.superscript})},subscript:function(a){return b("fa fa-subscript",{event:"subscript",title:a.font.subscript})},clear:function(a,c){return b(c.iconPrefix+"eraser",{event:"removeFormat",title:a.font.clear})},ul:function(a,c){return b(c.iconPrefix+"list-ul",{event:"insertUnorderedList",title:a.lists.unordered})},ol:function(a,c){return b(c.iconPrefix+"list-ol",{event:"insertOrderedList",title:a.lists.ordered})},paragraph:function(a,c){var d=b(c.iconPrefix+"align-left",{title:a.paragraph.left,event:"justifyLeft"}),e=b(c.iconPrefix+"align-center",{title:a.paragraph.center,event:"justifyCenter"}),f=b(c.iconPrefix+"align-right",{title:a.paragraph.right,event:"justifyRight"}),g=b(c.iconPrefix+"align-justify",{title:a.paragraph.justify,event:"justifyFull"}),h=b(c.iconPrefix+"outdent",{title:a.paragraph.outdent,event:"outdent"}),i=b(c.iconPrefix+"indent",{title:a.paragraph.indent,event:"indent"}),j='<div class="dropdown-menu"><div class="note-align btn-group">'+d+e+f+g+'</div><div class="note-list btn-group">'+i+h+"</div></div>";return b(c.iconPrefix+"align-left",{title:a.paragraph.paragraph,dropdown:j})},height:function(a,c){var d=c.lineHeights.reduce(function(a,b){return a+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(b)+'"><i class="'+c.iconPrefix+'check"></i> '+b+"</a></li>"},"");return b(c.iconPrefix+"text-height",{title:a.font.height,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},help:function(a,c){return b(c.iconPrefix+"question",{event:"showHelpDialog",title:a.options.help,hide:!0})},fullscreen:function(a,c){return b(c.iconPrefix+"arrows-alt",{event:"fullscreen",title:a.options.fullscreen})},codeview:function(a,c){return b(c.iconPrefix+"code",{event:"codeview",title:a.options.codeview})},undo:function(a,c){return b(c.iconPrefix+"undo",{event:"undo",title:a.history.undo})},redo:function(a,c){return b(c.iconPrefix+"repeat",{event:"redo",title:a.history.redo})},hr:function(a,c){return b(c.iconPrefix+"minus",{event:"insertHorizontalRule",title:a.hr.insert})}},f=function(d,f){var g=function(){var a=b(f.iconPrefix+"edit",{title:d.link.edit,event:"showLinkDialog",hide:!0}),e=b(f.iconPrefix+"unlink",{title:d.link.unlink,event:"unlink"}),g='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+a+e+"</div>";return c("note-link-popover",g)},h=function(){var e=a('<span class="note-fontsize-10">100%</span>',{title:d.image.resizeFull,event:"resize",value:"1"}),g=a('<span class="note-fontsize-10">50%</span>',{title:d.image.resizeHalf,event:"resize",value:"0.5"}),h=a('<span class="note-fontsize-10">25%</span>',{title:d.image.resizeQuarter,event:"resize",value:"0.25"}),i=b(f.iconPrefix+"align-left",{title:d.image.floatLeft,event:"floatMe",value:"left"}),j=b(f.iconPrefix+"align-right",{title:d.image.floatRight,event:"floatMe",value:"right"}),k=b(f.iconPrefix+"align-justify",{title:d.image.floatNone,event:"floatMe",value:"none"}),l=b(f.iconPrefix+"square",{title:d.image.shapeRounded,event:"imageShape",value:"img-rounded"}),m=b(f.iconPrefix+"circle-o",{title:d.image.shapeCircle,event:"imageShape",value:"img-circle"}),n=b(f.iconPrefix+"picture-o",{title:d.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),o=b(f.iconPrefix+"times",{title:d.image.shapeNone,event:"imageShape",
value:""}),p=b(f.iconPrefix+"trash-o",{title:d.image.remove,event:"removeMedia",value:"none"}),q='<div class="btn-group">'+e+g+h+'</div><div class="btn-group">'+i+j+k+'</div><div class="btn-group">'+l+m+n+o+'</div><div class="btn-group">'+p+"</div>";return c("note-image-popover",q)},i=function(){for(var a=$("<div />"),b=0,g=f.airPopover.length;g>b;b++){for(var h=f.airPopover[b],i=$('<div class="note-'+h[0]+' btn-group">'),j=0,k=h[1].length;k>j;j++){var l=$(e[h[1][j]](d,f));l.attr("data-name",h[1][j]),i.append(l)}a.append(i)}return c("note-air-popover",a.children())},j=$('<div class="note-popover" />');return j.append(g()),j.append(h()),f.airMode&&j.append(i()),j},g=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},h=function(a,b){var c="note-shortcut-col col-xs-6 note-shortcut-",d=[];for(var e in b)b.hasOwnProperty(e)&&d.push('<div class="'+c+'key">'+b[e].kbd+'</div><div class="'+c+'name">'+b[e].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+c+'title col-xs-offset-6">'+a+'</div></div><div class="note-shortcut-row row">'+d.join('</div><div class="note-shortcut-row row">')+"</div>"},i=function(a){var b=[{kbd:" + B",text:a.font.bold},{kbd:" + I",text:a.font.italic},{kbd:" + U",text:a.font.underline},{kbd:" + \\",text:a.font.clear}];return h(a.shortcut.textFormatting,b)},j=function(a){var b=[{kbd:" + Z",text:a.history.undo},{kbd:" +  + Z",text:a.history.redo},{kbd:" + ]",text:a.paragraph.indent},{kbd:" + [",text:a.paragraph.outdent},{kbd:" + ENTER",text:a.hr.insert}];return h(a.shortcut.action,b)},k=function(a){var b=[{kbd:" +  + L",text:a.paragraph.left},{kbd:" +  + E",text:a.paragraph.center},{kbd:" +  + R",text:a.paragraph.right},{kbd:" +  + J",text:a.paragraph.justify},{kbd:" +  + NUM7",text:a.lists.ordered},{kbd:" +  + NUM8",text:a.lists.unordered}];return h(a.shortcut.paragraphFormatting,b)},l=function(a){var b=[{kbd:" + NUM0",text:a.style.normal},{kbd:" + NUM1",text:a.style.h1},{kbd:" + NUM2",text:a.style.h2},{kbd:" + NUM3",text:a.style.h3},{kbd:" + NUM4",text:a.style.h4},{kbd:" + NUM5",text:a.style.h5},{kbd:" + NUM6",text:a.style.h6}];return h(a.shortcut.documentStyle,b)},m=function(a,b){var c=b.extraKeys,d=[];for(var e in c)c.hasOwnProperty(e)&&d.push({kbd:e,text:c[e]});return h(a.shortcut.extraKeys,d)},n=function(a,b){var c='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',d=["<div "+c+">"+j(a,b)+"</div><div "+c+">"+i(a,b)+"</div>","<div "+c+">"+l(a,b)+"</div><div "+c+">"+k(a,b)+"</div>"];return b.extraKeys&&d.push("<div "+c+">"+m(a,b)+"</div>"),'<div class="note-shortcut-row row">'+d.join('</div><div class="note-shortcut-row row">')+"</div>"},o=function(a){return a.replace(//g,"Ctrl").replace(//g,"Shift")},p={image:function(a,b){var c="";if(b.maximumImageFileSize){var e=Math.floor(Math.log(b.maximumImageFileSize)/Math.log(1024)),f=1*(b.maximumImageFileSize/Math.pow(1024,e)).toFixed(2)+" "+" KMGTP"[e]+"B";c="<small>"+a.image.maximumFileSize+" : "+f+"</small>"}var g='<div class="form-group row-fluid note-group-select-from-files"><label>'+a.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+c+'</div><div class="form-group row-fluid"><label>'+a.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',h='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+a.image.insert+"</button>";return d("note-image-dialog",a.image.insert,g,h)},link:function(a,b){var c='<div class="form-group row-fluid"><label>'+a.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+a.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(b.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+a.link.openInNewWindow+"</label></div>"),e='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+a.link.insert+"</button>";return d("note-link-dialog",a.link.insert,c,e)},help:function(a,b){var c='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+a.shortcut.close+'</a><div class="title">'+a.shortcut.shortcuts+"</div>"+(agent.isMac?n(a,b):o(n(a,b)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 1.0.0</a>  <a href="//github.com/summernote/summernote" target="_blank">Project</a>  <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return d("note-help-dialog","",c,"")}},q=function(a,b){var c="";return $.each(p,function(d,e){c+=e(a,b)}),'<div class="note-dialog">'+c+"</div>"},r=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},s=function(a){return agent.isMac&&(a=a.replace("CMD","").replace("SHIFT","")),a.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},t=function(a,b,c){var d=func.invertObject(b),e=a.find("button");e.each(function(a,b){var c=$(b),e=d[c.data("event")];e&&c.attr("title",function(a,b){return b+" ("+s(e)+")"})}).tooltip({container:"body",trigger:"hover",placement:c||"top"}).on("click",function(){$(this).tooltip("hide")})},u=function(a,b){var c=b.colors;a.find(".note-color-palette").each(function(){for(var a=$(this),b=a.attr("data-target-event"),d=[],e=0,f=c.length;f>e;e++){for(var g=c[e],h=[],i=0,j=g.length;j>i;i++){var k=g[i];h.push(['<button type="button" class="note-color-btn" style="background-color:',k,';" data-event="',b,'" data-value="',k,'" title="',k,'" data-toggle="button" tabindex="-1"></button>'].join(""))}d.push('<div class="note-color-row">'+h.join("")+"</div>")}a.html(d.join(""))})};this.createLayoutByAirMode=function(a,b){var c=b.langInfo,d=b.keyMap[agent.isMac?"mac":"pc"],e=func.uniqueId();a.addClass("note-air-editor note-editable"),a.attr({id:"note-editor-"+e,contentEditable:!0});var h=document.body,i=$(f(c,b));i.addClass("note-air-layout"),i.attr("id","note-popover-"+e),i.appendTo(h),t(i,d),u(i,b);var j=$(g());j.addClass("note-air-layout"),j.attr("id","note-handle-"+e),j.appendTo(h);var k=$(q(c,b));k.addClass("note-air-layout"),k.attr("id","note-dialog-"+e),k.find("button.close, a.modal-close").click(function(){$(this).closest(".modal").modal("hide")}),k.appendTo(h)},this.createLayoutByFrame=function(a,b){var c=b.langInfo,d=$('<div class="note-editor"></div>');b.width&&d.width(b.width),b.height>0&&$('<div class="note-statusbar">'+(b.disableResizeEditor?"":r())+"</div>").prependTo(d);var h=!a.is(":disabled"),i=$('<div class="note-editable" contentEditable="'+h+'"></div>').prependTo(d);b.height&&i.height(b.height),b.direction&&i.attr("dir",b.direction);var j=a.attr("placeholder")||b.placeholder;j&&i.attr("data-placeholder",j),i.html(dom.html(a)),$('<textarea class="note-codable"></textarea>').prependTo(d);for(var k=$('<div class="note-toolbar btn-toolbar" />'),l=0,m=b.toolbar.length;m>l;l++){for(var n=b.toolbar[l][0],o=b.toolbar[l][1],p=$('<div class="note-'+n+' btn-group" />'),s=0,v=o.length;v>s;s++){var w=e[o[s]];if($.isFunction(w)){var x=$(w(c,b));x.attr("data-name",o[s]),p.append(x)}}k.append(p)}k.prependTo(d);var y=b.keyMap[agent.isMac?"mac":"pc"];u(k,b),t(k,y,"bottom");var z=$(f(c,b)).prependTo(d);u(z,b),t(z,y),$(g()).prependTo(d);var A=$(q(c,b)).prependTo(d);A.find("button.close, a.modal-close").click(function(){$(this).closest(".modal").modal("hide")}),$('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(d),d.insertAfter(a),a.hide()},this.hasNoteEditor=function(a){return this.noteEditorFromHolder(a).length>0},this.noteEditorFromHolder=function(a){return a.hasClass("note-air-editor")?a:a.next().hasClass("note-editor")?a.next():$()},this.createLayout=function(a,b){b.airMode?this.createLayoutByAirMode(a,b):this.createLayoutByFrame(a,b)},this.layoutInfoFromHolder=function(a){var b=this.noteEditorFromHolder(a);if(b.length)return b.data("holder",a),dom.buildLayoutInfo(b)},this.removeLayout=function(a,b,c){c.airMode?(a.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),b.popover().remove(),b.handle().remove(),b.dialog().remove()):(a.html(b.editable().html()),b.editor().remove(),a.show())},this.getTemplate=function(){return{button:a,iconButton:b,dialog:d}},this.addButtonInfo=function(a,b){e[a]=b},this.addDialogInfo=function(a,b){p[a]=b}};$.summernote=$.summernote||{},$.extend($.summernote,defaults);var renderer=new Renderer,eventHandler=new EventHandler;$.extend($.summernote,{renderer:renderer,eventHandler:eventHandler,core:{agent:agent,dom:dom,range:range},pluginEvents:{},plugins:[]}),$.summernote.addPlugin=function(a){$.summernote.plugins.push(a),a.buttons&&$.each(a.buttons,function(a,b){renderer.addButtonInfo(a,b)}),a.dialogs&&$.each(a.dialogs,function(a,b){renderer.addDialogInfo(a,b)}),a.events&&$.each(a.events,function(a,b){$.summernote.pluginEvents[a]=b}),a.langs&&$.each(a.langs,function(a,b){$.summernote.lang[a]&&$.extend($.summernote.lang[a],b)}),a.options&&$.extend($.summernote.options,a.options)},$.fn.extend({summernote:function(){var a=$.type(list.head(arguments)),b="string"===a,c="object"===a,d=c?list.head(arguments):{};d=$.extend({},$.summernote.options,d),$.summernote.options=d,d.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[d.lang]),this.each(function(a,b){var c=$(b);if(!renderer.hasNoteEditor(c)){renderer.createLayout(c,d);var e=renderer.layoutInfoFromHolder(c);eventHandler.attach(e,d),eventHandler.attachCustomEvent(e,d)}}),!b&&this.length&&d.oninit&&d.oninit();var e=this.first();if(e.length){var f=renderer.layoutInfoFromHolder(e);if(b){var g=list.head(list.from(arguments)),h=list.tail(list.from(arguments)),i=[g,f.editable()].concat(h);return eventHandler.invoke.apply(eventHandler,i)}d.focus&&f.editable().focus()}return this},code:function(a){if(void 0===a){var b=this.first();if(!b.length)return;var c=renderer.layoutInfoFromHolder(b),d=c&&c.editable();if(d&&d.length){var e=eventHandler.invoke("codeview.isActivated",c);return eventHandler.invoke("codeview.sync",c),e?c.codable().val():c.editable().html()}return dom.value(b)}return this.each(function(b,c){var d=renderer.layoutInfoFromHolder($(c)),e=d&&d.editable();e&&e.html(a)}),this},destroy:function(){return this.each(function(a,b){var c=$(b);if(renderer.hasNoteEditor(c)){var d=renderer.layoutInfoFromHolder(c),e=d.editor().data("options");eventHandler.detach(d,e),renderer.removeLayout(c,d,e)}}),this}});